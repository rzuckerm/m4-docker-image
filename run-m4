#!/bin/bash
PROG="$1"
shift

ARGS=(-DARGC=$#)
ARGC=$#
for ((i=1; i<=$ARGC; i++))
do
    ARGS+=(-DARGV$i='`'"$1'")
    shift
done
m4 "${ARGS[@]}" "${PROG}"
